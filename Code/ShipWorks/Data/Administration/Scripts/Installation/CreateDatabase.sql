IF EXISTS (SELECT name FROM master.dbo.sysdatabases WHERE name = N'{DBNAME}') 
    RAISERROR('The database {DBNAME} already exists on the server.', 16, 1)
GO

CREATE DATABASE {DBNAME}  
    ON (
        NAME = N'ShipWorks_Data', 
        FILENAME = N'{FILEPATH}{DBNAME}_Data.MDF' , 
        SIZE = 10, 
        FILEGROWTH = 100MB) 
    LOG ON (
        NAME = N'ShipWorks_Log', 
        FILENAME = N'{FILEPATH}{DBNAME}_Log.LDF' , 
        SIZE = 10, 
        FILEGROWTH = 100MB)
    COLLATE SQL_Latin1_General_CP1_CI_AS
GO

ALTER DATABASE {DBNAME} SET COMPATIBILITY_LEVEL = 100
GO

IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [{DBNAME}].[dbo].[sp_fulltext_database] @action = 'disable'
end
GO

ALTER DATABASE {DBNAME} set auto_close on
GO

ALTER DATABASE {DBNAME} SET RECOVERY simple --trunc. log
GO

ALTER DATABASE {DBNAME} SET AUTO_SHRINK ON 
GO

ALTER DATABASE {DBNAME} set Page_verify Torn_Page_Detection
GO

ALTER DATABASE {DBNAME} set  Read_Write
GO

ALTER DATABASE {DBNAME} SET MULTI_USER --dbo use
GO

ALTER DATABASE {DBNAME} SET ANSI_NULL_DEFAULT OFF
GO

ALTER DATABASE {DBNAME} SET RECURSIVE_TRIGGERS OFF
GO

ALTER DATABASE {DBNAME} SET ANSI_NULLS OFF
GO

ALTER DATABASE {DBNAME} SET CONCAT_NULL_YIELDS_NULL OFF
GO

ALTER DATABASE {DBNAME} SET CURSOR_CLOSE_ON_COMMIT OFF
GO

ALTER DATABASE {DBNAME} SET CURSOR_DEFAULT GLOBAL
GO

ALTER DATABASE {DBNAME} SET QUOTED_IDENTIFIER OFF
GO

ALTER DATABASE {DBNAME} SET ANSI_WARNINGS OFF
GO

ALTER DATABASE {DBNAME} SET AUTO_CREATE_STATISTICS ON
GO

ALTER DATABASE {DBNAME} SET AUTO_UPDATE_STATISTICS ON
GO

ALTER DATABASE {DBNAME}
  SET CHANGE_TRACKING = ON
  (CHANGE_RETENTION = 1 DAYS, AUTO_CLEANUP = ON)
GO
