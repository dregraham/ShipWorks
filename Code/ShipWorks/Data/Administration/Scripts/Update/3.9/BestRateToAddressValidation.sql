/*
Deployment script for ShipWorksLocal

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "ShipWorksLocal"
:setvar DefaultFilePrefix "ShipWorksLocal"
:setvar DefaultDataPath ""
:setvar DefaultLogPath ""

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [$(DatabaseName)];


GO
PRINT N'Rename refactoring operation with key 0c74f1f2-5daf-4a3c-94d6-07ea7e9a1e58 is skipped, element [dbo].[ValidatedAddress].[Id] (SqlSimpleColumn) will not be renamed to ValidatedAddressID';


GO
PRINT N'Rename refactoring operation with key 4ed1e7a8-6e41-4a51-864b-f9934613b641 is skipped, element [dbo].[ValidatedAddress].[OrderID] (SqlSimpleColumn) will not be renamed to ConsumerID';


GO
PRINT N'Rename refactoring operation with key 5a268481-3a79-4e4e-b7cf-d190c55d8f7d is skipped, element [dbo].[Store].[AutoAddressValidation] (SqlSimpleColumn) will not be renamed to AddressValidationSetting';


GO
PRINT N'Dropping FK_AmazonOrder_Order...';


GO
ALTER TABLE [dbo].[AmazonOrder] DROP CONSTRAINT [FK_AmazonOrder_Order];


GO
PRINT N'Dropping FK_ChannelAdvisorOrder_Order...';


GO
ALTER TABLE [dbo].[ChannelAdvisorOrder] DROP CONSTRAINT [FK_ChannelAdvisorOrder_Order];


GO
PRINT N'Dropping FK_ClickCartProOrder_Order...';


GO
ALTER TABLE [dbo].[ClickCartProOrder] DROP CONSTRAINT [FK_ClickCartProOrder_Order];


GO
PRINT N'Dropping FK_CommerceInterfaceOrder_Order...';


GO
ALTER TABLE [dbo].[CommerceInterfaceOrder] DROP CONSTRAINT [FK_CommerceInterfaceOrder_Order];


GO
PRINT N'Dropping FK_EbayOrder_Order...';


GO
ALTER TABLE [dbo].[EbayOrder] DROP CONSTRAINT [FK_EbayOrder_Order];


GO
PRINT N'Dropping FK_EtsyOrder_Order...';


GO
ALTER TABLE [dbo].[EtsyOrder] DROP CONSTRAINT [FK_EtsyOrder_Order];


GO
PRINT N'Dropping FK_MagentoOrder_Order...';


GO
ALTER TABLE [dbo].[MagentoOrder] DROP CONSTRAINT [FK_MagentoOrder_Order];


GO
PRINT N'Dropping FK_MarketworksOrder_Order...';


GO
ALTER TABLE [dbo].[MarketplaceAdvisorOrder] DROP CONSTRAINT [FK_MarketworksOrder_Order];


GO
PRINT N'Dropping FK_NetworkSolutionsOrder_Order...';


GO
ALTER TABLE [dbo].[NetworkSolutionsOrder] DROP CONSTRAINT [FK_NetworkSolutionsOrder_Order];


GO
PRINT N'Dropping FK_NeweggOrder_Order...';


GO
ALTER TABLE [dbo].[NeweggOrder] DROP CONSTRAINT [FK_NeweggOrder_Order];


GO
PRINT N'Dropping FK_Order_Customer...';


GO
ALTER TABLE [dbo].[Order] DROP CONSTRAINT [FK_Order_Customer];


GO
PRINT N'Dropping FK_Order_Store...';


GO
ALTER TABLE [dbo].[Order] DROP CONSTRAINT [FK_Order_Store];


GO
PRINT N'Dropping FK_OrderCharge_Order...';


GO
ALTER TABLE [dbo].[OrderCharge] DROP CONSTRAINT [FK_OrderCharge_Order];


GO
PRINT N'Dropping FK_OrderItem_Order...';


GO
ALTER TABLE [dbo].[OrderItem] DROP CONSTRAINT [FK_OrderItem_Order];


GO
PRINT N'Dropping FK_OrderMotionOrder_Order...';


GO
ALTER TABLE [dbo].[OrderMotionOrder] DROP CONSTRAINT [FK_OrderMotionOrder_Order];


GO
PRINT N'Dropping FK_OrderPaymentDetail_Order...';


GO
ALTER TABLE [dbo].[OrderPaymentDetail] DROP CONSTRAINT [FK_OrderPaymentDetail_Order];


GO
PRINT N'Dropping FK_PayPalOrder_Order...';


GO
ALTER TABLE [dbo].[PayPalOrder] DROP CONSTRAINT [FK_PayPalOrder_Order];


GO
PRINT N'Dropping FK_ProStoresOrder_Order...';


GO
ALTER TABLE [dbo].[ProStoresOrder] DROP CONSTRAINT [FK_ProStoresOrder_Order];


GO
PRINT N'Dropping FK_SearsOrder_Order...';


GO
ALTER TABLE [dbo].[SearsOrder] DROP CONSTRAINT [FK_SearsOrder_Order];


GO
PRINT N'Dropping FK_Shipment_Order...';


GO
ALTER TABLE [dbo].[Shipment] DROP CONSTRAINT [FK_Shipment_Order];


GO
PRINT N'Dropping FK_ShopifyOrder_Order...';


GO
ALTER TABLE [dbo].[ShopifyOrder] DROP CONSTRAINT [FK_ShopifyOrder_Order];


GO
PRINT N'Dropping FK_YahooOrder_Order...';


GO
ALTER TABLE [dbo].[YahooOrder] DROP CONSTRAINT [FK_YahooOrder_Order];


GO
PRINT N'Dropping FK_BestRateShipment_Shipment...';


GO
ALTER TABLE [dbo].[BestRateShipment] DROP CONSTRAINT [FK_BestRateShipment_Shipment];


GO
PRINT N'Dropping FK_EquashipShipment_Shipment...';


GO
ALTER TABLE [dbo].[EquaShipShipment] DROP CONSTRAINT [FK_EquashipShipment_Shipment];


GO
PRINT N'Dropping FK_FedExShipment_Shipment...';


GO
ALTER TABLE [dbo].[FedExShipment] DROP CONSTRAINT [FK_FedExShipment_Shipment];


GO
PRINT N'Dropping FK_iParcelShipment_Shipment...';


GO
ALTER TABLE [dbo].[iParcelShipment] DROP CONSTRAINT [FK_iParcelShipment_Shipment];


GO
PRINT N'Dropping FK_OnTracShipment_Shipment...';


GO
ALTER TABLE [dbo].[OnTracShipment] DROP CONSTRAINT [FK_OnTracShipment_Shipment];


GO
PRINT N'Dropping FK_OtherShipment_Shipment...';


GO
ALTER TABLE [dbo].[OtherShipment] DROP CONSTRAINT [FK_OtherShipment_Shipment];


GO
PRINT N'Dropping FK_PostalShipment_Shipment...';


GO
ALTER TABLE [dbo].[PostalShipment] DROP CONSTRAINT [FK_PostalShipment_Shipment];


GO
PRINT N'Dropping FK_Shipment_ProcessedComputer...';


GO
ALTER TABLE [dbo].[Shipment] DROP CONSTRAINT [FK_Shipment_ProcessedComputer];


GO
PRINT N'Dropping FK_Shipment_ProcessedUser...';


GO
ALTER TABLE [dbo].[Shipment] DROP CONSTRAINT [FK_Shipment_ProcessedUser];


GO
PRINT N'Dropping FK_Shipment_VoidedComputer...';


GO
ALTER TABLE [dbo].[Shipment] DROP CONSTRAINT [FK_Shipment_VoidedComputer];


GO
PRINT N'Dropping FK_Shipment_VoidedUser...';


GO
ALTER TABLE [dbo].[Shipment] DROP CONSTRAINT [FK_Shipment_VoidedUser];


GO
PRINT N'Dropping FK_ShipmentCustomsItem_Shipment...';


GO
ALTER TABLE [dbo].[ShipmentCustomsItem] DROP CONSTRAINT [FK_ShipmentCustomsItem_Shipment];


GO
PRINT N'Dropping FK_UpsShipment_Shipment...';


GO
ALTER TABLE [dbo].[UpsShipment] DROP CONSTRAINT [FK_UpsShipment_Shipment];


GO
PRINT N'Dropping FK_AmazonStore_Store...';


GO
ALTER TABLE [dbo].[AmazonStore] DROP CONSTRAINT [FK_AmazonStore_Store];


GO
PRINT N'Dropping FK_AmeriCommerceStore_Store...';


GO
ALTER TABLE [dbo].[AmeriCommerceStore] DROP CONSTRAINT [FK_AmeriCommerceStore_Store];


GO
PRINT N'Dropping FK_BigCommerceStore_Store...';


GO
ALTER TABLE [dbo].[BigCommerceStore] DROP CONSTRAINT [FK_BigCommerceStore_Store];


GO
PRINT N'Dropping FK_BuyComStore_Store...';


GO
ALTER TABLE [dbo].[BuyDotComStore] DROP CONSTRAINT [FK_BuyComStore_Store];


GO
PRINT N'Dropping FK_ChannelAdvisorStore_Store...';


GO
ALTER TABLE [dbo].[ChannelAdvisorStore] DROP CONSTRAINT [FK_ChannelAdvisorStore_Store];


GO
PRINT N'Dropping FK_Download_Store...';


GO
ALTER TABLE [dbo].[Download] DROP CONSTRAINT [FK_Download_Store];


GO
PRINT N'Dropping FK_EbayStore_Store...';


GO
ALTER TABLE [dbo].[EbayStore] DROP CONSTRAINT [FK_EbayStore_Store];


GO
PRINT N'Dropping FK_EtsyStore_Store...';


GO
ALTER TABLE [dbo].[EtsyStore] DROP CONSTRAINT [FK_EtsyStore_Store];


GO
PRINT N'Dropping FK_GenericFileStore_Store...';


GO
ALTER TABLE [dbo].[GenericFileStore] DROP CONSTRAINT [FK_GenericFileStore_Store];


GO
PRINT N'Dropping FK_GenericModuleStore_Store...';


GO
ALTER TABLE [dbo].[GenericModuleStore] DROP CONSTRAINT [FK_GenericModuleStore_Store];


GO
PRINT N'Dropping FK_InfopiaStore_InfopiaStore...';


GO
ALTER TABLE [dbo].[InfopiaStore] DROP CONSTRAINT [FK_InfopiaStore_InfopiaStore];


GO
PRINT N'Dropping FK_MarketworksStore_Store...';


GO
ALTER TABLE [dbo].[MarketplaceAdvisorStore] DROP CONSTRAINT [FK_MarketworksStore_Store];


GO
PRINT N'Dropping FK_NetworkSolutionsStore_Store...';


GO
ALTER TABLE [dbo].[NetworkSolutionsStore] DROP CONSTRAINT [FK_NetworkSolutionsStore_Store];


GO
PRINT N'Dropping FK_NeweggStore_Store...';


GO
ALTER TABLE [dbo].[NeweggStore] DROP CONSTRAINT [FK_NeweggStore_Store];


GO
PRINT N'Dropping FK_OrderMotionStore_Store...';


GO
ALTER TABLE [dbo].[OrderMotionStore] DROP CONSTRAINT [FK_OrderMotionStore_Store];


GO
PRINT N'Dropping FK_PayPalStore_Store...';


GO
ALTER TABLE [dbo].[PayPalStore] DROP CONSTRAINT [FK_PayPalStore_Store];


GO
PRINT N'Dropping FK_ProStoresStore_Store...';


GO
ALTER TABLE [dbo].[ProStoresStore] DROP CONSTRAINT [FK_ProStoresStore_Store];


GO
PRINT N'Dropping FK_SearsStore_Store...';


GO
ALTER TABLE [dbo].[SearsStore] DROP CONSTRAINT [FK_SearsStore_Store];


GO
PRINT N'Dropping FK_ShopifyStore_Store...';


GO
ALTER TABLE [dbo].[ShopifyStore] DROP CONSTRAINT [FK_ShopifyStore_Store];


GO
PRINT N'Dropping FK_StatusPreset_Store...';


GO
ALTER TABLE [dbo].[StatusPreset] DROP CONSTRAINT [FK_StatusPreset_Store];


GO
PRINT N'Dropping FK_StoreShopSite_Store...';


GO
ALTER TABLE [dbo].[ShopSiteStore] DROP CONSTRAINT [FK_StoreShopSite_Store];


GO
PRINT N'Dropping FK_ThreeDCartStore_Store...';


GO
ALTER TABLE [dbo].[ThreeDCartStore] DROP CONSTRAINT [FK_ThreeDCartStore_Store];


GO
PRINT N'Dropping FK_VolusionStore_Store...';


GO
ALTER TABLE [dbo].[VolusionStore] DROP CONSTRAINT [FK_VolusionStore_Store];


GO
PRINT N'Dropping FK_YahooStore_Store...';


GO
ALTER TABLE [dbo].[YahooStore] DROP CONSTRAINT [FK_YahooStore_Store];


GO
PRINT N'Starting rebuilding table [dbo].[Order]...';


GO
BEGIN TRANSACTION;

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

SET XACT_ABORT ON;

CREATE TABLE [dbo].[tmp_ms_xx_Order] (
    [OrderID]                              BIGINT         IDENTITY (1006, 1000) NOT NULL,
    [RowVersion]                           ROWVERSION     NOT NULL,
    [StoreID]                              BIGINT         NOT NULL,
    [CustomerID]                           BIGINT         NOT NULL,
    [OrderNumber]                          BIGINT         NOT NULL,
    [OrderNumberComplete]                  NVARCHAR (50)  NOT NULL,
    [OrderDate]                            DATETIME       NOT NULL,
    [OrderTotal]                           MONEY          NOT NULL,
    [LocalStatus]                          NVARCHAR (100) NOT NULL,
    [IsManual]                             BIT            NOT NULL,
    [OnlineLastModified]                   DATETIME       NOT NULL,
    [OnlineCustomerID]                     SQL_VARIANT    NULL,
    [OnlineStatus]                         NVARCHAR (100) NOT NULL,
    [OnlineStatusCode]                     SQL_VARIANT    NULL,
    [RequestedShipping]                    NVARCHAR (50)  NOT NULL,
    [BillFirstName]                        NVARCHAR (30)  NOT NULL,
    [BillMiddleName]                       NVARCHAR (30)  NOT NULL,
    [BillLastName]                         NVARCHAR (30)  NOT NULL,
    [BillCompany]                          NVARCHAR (60)  NOT NULL,
    [BillStreet1]                          NVARCHAR (60)  NOT NULL,
    [BillStreet2]                          NVARCHAR (60)  NOT NULL,
    [BillStreet3]                          NVARCHAR (60)  NOT NULL,
    [BillCity]                             NVARCHAR (50)  NOT NULL,
    [BillStateProvCode]                    NVARCHAR (50)  NOT NULL,
    [BillPostalCode]                       NVARCHAR (20)  NOT NULL,
    [BillCountryCode]                      NVARCHAR (50)  NOT NULL,
    [BillPhone]                            NVARCHAR (25)  NOT NULL,
    [BillFax]                              NVARCHAR (35)  NOT NULL,
    [BillEmail]                            NVARCHAR (100) NOT NULL,
    [BillWebsite]                          NVARCHAR (50)  NOT NULL,
    [BillAddressValidationSuggestionCount] INT            NOT NULL,
    [BillAddressValidationStatus]          INT            NOT NULL,
    [BillAddressValidationError]           NVARCHAR (300) NOT NULL,
    [BillResidentialStatus]                INT            NOT NULL,
    [BillPOBox]                            INT            NOT NULL,
    [BillUSTerritory]                      INT            NOT NULL,
    [BillMilitaryAddress]                  INT            NOT NULL,
    [ShipFirstName]                        NVARCHAR (30)  NOT NULL,
    [ShipMiddleName]                       NVARCHAR (30)  NOT NULL,
    [ShipLastName]                         NVARCHAR (30)  NOT NULL,
    [ShipCompany]                          NVARCHAR (60)  NOT NULL,
    [ShipStreet1]                          NVARCHAR (60)  NOT NULL,
    [ShipStreet2]                          NVARCHAR (60)  NOT NULL,
    [ShipStreet3]                          NVARCHAR (60)  NOT NULL,
    [ShipCity]                             NVARCHAR (50)  NOT NULL,
    [ShipStateProvCode]                    NVARCHAR (50)  NOT NULL,
    [ShipPostalCode]                       NVARCHAR (20)  NOT NULL,
    [ShipCountryCode]                      NVARCHAR (50)  NOT NULL,
    [ShipPhone]                            NVARCHAR (25)  NOT NULL,
    [ShipFax]                              NVARCHAR (35)  NOT NULL,
    [ShipEmail]                            NVARCHAR (100) NOT NULL,
    [ShipWebsite]                          NVARCHAR (50)  NOT NULL,
    [ShipAddressValidationSuggestionCount] INT            NOT NULL,
    [ShipAddressValidationStatus]          INT            NOT NULL,
    [ShipAddressValidationError]           NVARCHAR (300) NOT NULL,
    [ShipResidentialStatus]                INT            NOT NULL,
    [ShipPOBox]                            INT            NOT NULL,
    [ShipUSTerritory]                      INT            NOT NULL,
    [ShipMilitaryAddress]                  INT            NOT NULL,
    [RollupItemCount]                      INT            NOT NULL,
    [RollupItemName]                       NVARCHAR (300) NULL,
    [RollupItemCode]                       NVARCHAR (300) NULL,
    [RollupItemSKU]                        NVARCHAR (100) NULL,
    [RollupItemLocation]                   NVARCHAR (255) NULL,
    [RollupItemQuantity]                   FLOAT (53)     NULL,
    [RollupItemTotalWeight]                FLOAT (53)     NOT NULL,
    [RollupNoteCount]                      INT            NOT NULL,
    [BillNameParseStatus]                  INT            NOT NULL,
    [BillUnparsedName]                     NVARCHAR (100) NOT NULL,
    [ShipNameParseStatus]                  INT            NOT NULL,
    [ShipUnparsedName]                     NVARCHAR (100) NOT NULL,
    CONSTRAINT [tmp_ms_xx_constraint_PK_Order] PRIMARY KEY CLUSTERED ([OrderID] ASC)
);

ALTER TABLE [dbo].[tmp_ms_xx_Order]
    ADD CONSTRAINT [SD_Order_0151619f85f7408f9f4d62c7554ff68c] DEFAULT 0 FOR [BillAddressValidationSuggestionCount],
        CONSTRAINT [SD_Order_40ee3038a849431b8267e03008b10763] DEFAULT 0 FOR [BillAddressValidationStatus],
        CONSTRAINT [SD_Order_d933e717bf194f389377496ae5ee0727] DEFAULT N'' FOR [BillAddressValidationError],
        CONSTRAINT [SD_Order_b267e73173e34841ae88e3316b860de1] DEFAULT 0 FOR [BillResidentialStatus],
        CONSTRAINT [SD_Order_9a892ac14b8143718dfb28291a039d36] DEFAULT 0 FOR [BillPOBox],
        CONSTRAINT [SD_Order_3f25d39fa5a6438fb0c0398eb6645175] DEFAULT 0 FOR [BillUSTerritory],
        CONSTRAINT [SD_Order_ccefb3f8c5564500b3f3aa7bc3234548] DEFAULT 0 FOR [BillMilitaryAddress],
        CONSTRAINT [SD_Order_a34f4ae975924e739b13f412c945052e] DEFAULT 0 FOR [ShipAddressValidationSuggestionCount],
        CONSTRAINT [SD_Order_104340358d714e6c85175dc8ec7c6d6d] DEFAULT 0 FOR [ShipAddressValidationStatus],
        CONSTRAINT [SD_Order_fec9c85a00284819bb977a025cf4415f] DEFAULT N'' FOR [ShipAddressValidationError],
        CONSTRAINT [SD_Order_2b258ff0645542d2a20106dfcc549d72] DEFAULT 0 FOR [ShipResidentialStatus],
        CONSTRAINT [SD_Order_c6fe7cdaadd2450db68856d66bc0337a] DEFAULT 0 FOR [ShipPOBox],
        CONSTRAINT [SD_Order_f7c6a319b8574b8082f4c398584f05dc] DEFAULT 0 FOR [ShipUSTerritory],
        CONSTRAINT [SD_Order_8cfe7a69e46d4b60ac5a5c1ef09ef39a] DEFAULT 0 FOR [ShipMilitaryAddress];

IF EXISTS (SELECT TOP 1 1 
           FROM   [dbo].[Order])
    BEGIN
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_Order] ON;
        INSERT INTO [dbo].[tmp_ms_xx_Order] ([OrderID], [StoreID], [CustomerID], [OrderNumber], [OrderNumberComplete], [OrderDate], [OrderTotal], [LocalStatus], [IsManual], [OnlineLastModified], [OnlineCustomerID], [OnlineStatus], [OnlineStatusCode], [RequestedShipping], [BillFirstName], [BillMiddleName], [BillLastName], [BillCompany], [BillStreet1], [BillStreet2], [BillStreet3], [BillCity], [BillStateProvCode], [BillPostalCode], [BillCountryCode], [BillPhone], [BillFax], [BillEmail], [BillWebsite], [ShipFirstName], [ShipMiddleName], [ShipLastName], [ShipCompany], [ShipStreet1], [ShipStreet2], [ShipStreet3], [ShipCity], [ShipStateProvCode], [ShipPostalCode], [ShipCountryCode], [ShipPhone], [ShipFax], [ShipEmail], [ShipWebsite], [RollupItemCount], [RollupItemName], [RollupItemCode], [RollupItemSKU], [RollupItemLocation], [RollupItemQuantity], [RollupItemTotalWeight], [RollupNoteCount], [BillNameParseStatus], [BillUnparsedName], [ShipNameParseStatus], [ShipUnparsedName])
        SELECT   [OrderID],
                 [StoreID],
                 [CustomerID],
                 [OrderNumber],
                 [OrderNumberComplete],
                 [OrderDate],
                 [OrderTotal],
                 [LocalStatus],
                 [IsManual],
                 [OnlineLastModified],
                 [OnlineCustomerID],
                 [OnlineStatus],
                 [OnlineStatusCode],
                 [RequestedShipping],
                 [BillFirstName],
                 [BillMiddleName],
                 [BillLastName],
                 [BillCompany],
                 [BillStreet1],
                 [BillStreet2],
                 [BillStreet3],
                 [BillCity],
                 [BillStateProvCode],
                 [BillPostalCode],
                 [BillCountryCode],
                 [BillPhone],
                 [BillFax],
                 [BillEmail],
                 [BillWebsite],
                 [ShipFirstName],
                 [ShipMiddleName],
                 [ShipLastName],
                 [ShipCompany],
                 [ShipStreet1],
                 [ShipStreet2],
                 [ShipStreet3],
                 [ShipCity],
                 [ShipStateProvCode],
                 [ShipPostalCode],
                 [ShipCountryCode],
                 [ShipPhone],
                 [ShipFax],
                 [ShipEmail],
                 [ShipWebsite],
                 [RollupItemCount],
                 [RollupItemName],
                 [RollupItemCode],
                 [RollupItemSKU],
                 [RollupItemLocation],
                 [RollupItemQuantity],
                 [RollupItemTotalWeight],
                 [RollupNoteCount],
                 [BillNameParseStatus],
                 [BillUnparsedName],
                 [ShipNameParseStatus],
                 [ShipUnparsedName]
        FROM     [dbo].[Order]
        ORDER BY [OrderID] ASC;
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_Order] OFF;
    END

ALTER TABLE [dbo].[tmp_ms_xx_Order] DROP CONSTRAINT [SD_Order_0151619f85f7408f9f4d62c7554ff68c], CONSTRAINT [SD_Order_40ee3038a849431b8267e03008b10763], CONSTRAINT [SD_Order_d933e717bf194f389377496ae5ee0727], CONSTRAINT [SD_Order_b267e73173e34841ae88e3316b860de1], CONSTRAINT [SD_Order_9a892ac14b8143718dfb28291a039d36], CONSTRAINT [SD_Order_3f25d39fa5a6438fb0c0398eb6645175], CONSTRAINT [SD_Order_ccefb3f8c5564500b3f3aa7bc3234548], CONSTRAINT [SD_Order_a34f4ae975924e739b13f412c945052e], CONSTRAINT [SD_Order_104340358d714e6c85175dc8ec7c6d6d], CONSTRAINT [SD_Order_fec9c85a00284819bb977a025cf4415f], CONSTRAINT [SD_Order_2b258ff0645542d2a20106dfcc549d72], CONSTRAINT [SD_Order_c6fe7cdaadd2450db68856d66bc0337a], CONSTRAINT [SD_Order_f7c6a319b8574b8082f4c398584f05dc], CONSTRAINT [SD_Order_8cfe7a69e46d4b60ac5a5c1ef09ef39a];

DROP TABLE [dbo].[Order];

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_Order]', N'Order';

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_constraint_PK_Order]', N'PK_Order', N'OBJECT';

COMMIT TRANSACTION;

SET TRANSACTION ISOLATION LEVEL READ COMMITTED;


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_BillCompany]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_BillCompany]
    ON [dbo].[Order]([BillCompany] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_BillCountryCode]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_BillCountryCode]
    ON [dbo].[Order]([BillCountryCode] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_BillEmail]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_BillEmail]
    ON [dbo].[Order]([BillEmail] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_BillLastName]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_BillLastName]
    ON [dbo].[Order]([BillLastName] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_BillPostalCode]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_BillPostalCode]
    ON [dbo].[Order]([BillPostalCode] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_BillStateProvCode]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_BillStateProvCode]
    ON [dbo].[Order]([BillStateProvCode] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_CustomerID]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_CustomerID]
    ON [dbo].[Order]([CustomerID] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_LocalStatus]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_LocalStatus]
    ON [dbo].[Order]([LocalStatus] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_OnlineStatus]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_OnlineStatus]
    ON [dbo].[Order]([OnlineStatus] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_OrderDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_OrderDate]
    ON [dbo].[Order]([OrderDate] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_OrderNumber]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_OrderNumber]
    ON [dbo].[Order]([OrderNumber] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_OrderNumberComplete]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_OrderNumberComplete]
    ON [dbo].[Order]([OrderNumberComplete] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_OrderTotal]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_OrderTotal]
    ON [dbo].[Order]([OrderTotal] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_RequestedShipping]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_RequestedShipping]
    ON [dbo].[Order]([RequestedShipping] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_RollupItemCode]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_RollupItemCode]
    ON [dbo].[Order]([RollupItemCode] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_RollupItemCount]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_RollupItemCount]
    ON [dbo].[Order]([RollupItemCount] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_RollupItemName]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_RollupItemName]
    ON [dbo].[Order]([RollupItemName] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_RollupItemSKU]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_RollupItemSKU]
    ON [dbo].[Order]([RollupItemSKU] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_RollupNoteCount]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_RollupNoteCount]
    ON [dbo].[Order]([RollupNoteCount] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_ShipCompany]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_ShipCompany]
    ON [dbo].[Order]([ShipCompany] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_ShipCountryCode]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_ShipCountryCode]
    ON [dbo].[Order]([ShipCountryCode] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_ShipEmail]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_ShipEmail]
    ON [dbo].[Order]([ShipEmail] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_ShipLastName]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_ShipLastName]
    ON [dbo].[Order]([ShipLastName] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_ShipPostalCode]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_ShipPostalCode]
    ON [dbo].[Order]([ShipPostalCode] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_ShipStateProvCode]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_ShipStateProvCode]
    ON [dbo].[Order]([ShipStateProvCode] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_Auto_StoreID]...';


GO
CREATE NONCLUSTERED INDEX [IX_Auto_StoreID]
    ON [dbo].[Order]([StoreID] ASC)
    INCLUDE([IsManual]);


GO
PRINT N'Creating [dbo].[Order].[IX_OnlineCustomerID]...';


GO
CREATE NONCLUSTERED INDEX [IX_OnlineCustomerID]
    ON [dbo].[Order]([OnlineCustomerID] ASC);


GO
PRINT N'Creating [dbo].[Order].[IX_OnlineLastModified_StoreID_IsManual]...';


GO
CREATE NONCLUSTERED INDEX [IX_OnlineLastModified_StoreID_IsManual]
    ON [dbo].[Order]([OnlineLastModified] DESC, [StoreID] ASC, [IsManual] ASC);


GO
ALTER TABLE [dbo].[Order] ENABLE CHANGE_TRACKING WITH (TRACK_COLUMNS_UPDATED = OFF);


GO
PRINT N'Starting rebuilding table [dbo].[Shipment]...';


GO
BEGIN TRANSACTION;

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

SET XACT_ABORT ON;

CREATE TABLE [dbo].[tmp_ms_xx_Shipment] (
    [ShipmentID]                           BIGINT         IDENTITY (1031, 1000) NOT NULL,
    [RowVersion]                           ROWVERSION     NOT NULL,
    [OrderID]                              BIGINT         NOT NULL,
    [ShipmentType]                         INT            NOT NULL,
    [ContentWeight]                        FLOAT (53)     NOT NULL,
    [TotalWeight]                          FLOAT (53)     NOT NULL,
    [Processed]                            BIT            NOT NULL,
    [ProcessedDate]                        DATETIME       NULL,
    [ProcessedUserID]                      BIGINT         NULL,
    [ProcessedComputerID]                  BIGINT         NULL,
    [ShipDate]                             DATETIME       NOT NULL,
    [ShipmentCost]                         MONEY          NOT NULL,
    [Voided]                               BIT            NOT NULL,
    [VoidedDate]                           DATETIME       NULL,
    [VoidedUserID]                         BIGINT         NULL,
    [VoidedComputerID]                     BIGINT         NULL,
    [TrackingNumber]                       NVARCHAR (50)  NOT NULL,
    [CustomsGenerated]                     BIT            NOT NULL,
    [CustomsValue]                         MONEY          NOT NULL,
    [ThermalType]                          INT            NULL,
    [ShipFirstName]                        NVARCHAR (30)  NOT NULL,
    [ShipMiddleName]                       NVARCHAR (30)  NOT NULL,
    [ShipLastName]                         NVARCHAR (30)  NOT NULL,
    [ShipCompany]                          NVARCHAR (60)  NOT NULL,
    [ShipStreet1]                          NVARCHAR (60)  NOT NULL,
    [ShipStreet2]                          NVARCHAR (60)  NOT NULL,
    [ShipStreet3]                          NVARCHAR (60)  NOT NULL,
    [ShipCity]                             NVARCHAR (50)  NOT NULL,
    [ShipStateProvCode]                    NVARCHAR (50)  NOT NULL,
    [ShipPostalCode]                       NVARCHAR (20)  NOT NULL,
    [ShipCountryCode]                      NVARCHAR (50)  NOT NULL,
    [ShipPhone]                            NVARCHAR (25)  NOT NULL,
    [ShipEmail]                            NVARCHAR (100) NOT NULL,
    [ShipAddressValidationSuggestionCount] INT            NOT NULL,
    [ShipAddressValidationStatus]          INT            NOT NULL,
    [ShipAddressValidationError]           NVARCHAR (300) NOT NULL,
    [ShipResidentialStatus]                INT            NOT NULL,
    [ShipPOBox]                            INT            NOT NULL,
    [ShipUSTerritory]                      INT            NOT NULL,
    [ShipMilitaryAddress]                  INT            NOT NULL,
    [ResidentialDetermination]             INT            NOT NULL,
    [ResidentialResult]                    BIT            NOT NULL,
    [OriginOriginID]                       BIGINT         NOT NULL,
    [OriginFirstName]                      NVARCHAR (30)  NOT NULL,
    [OriginMiddleName]                     NVARCHAR (30)  NOT NULL,
    [OriginLastName]                       NVARCHAR (30)  NOT NULL,
    [OriginCompany]                        NVARCHAR (60)  NOT NULL,
    [OriginStreet1]                        NVARCHAR (60)  NOT NULL,
    [OriginStreet2]                        NVARCHAR (60)  NOT NULL,
    [OriginStreet3]                        NVARCHAR (60)  NOT NULL,
    [OriginCity]                           NVARCHAR (50)  NOT NULL,
    [OriginStateProvCode]                  NVARCHAR (50)  NOT NULL,
    [OriginPostalCode]                     NVARCHAR (20)  NOT NULL,
    [OriginCountryCode]                    NVARCHAR (50)  NOT NULL,
    [OriginPhone]                          NVARCHAR (25)  NOT NULL,
    [OriginFax]                            NVARCHAR (35)  NOT NULL,
    [OriginEmail]                          NVARCHAR (100) NOT NULL,
    [OriginWebsite]                        NVARCHAR (50)  NOT NULL,
    [ReturnShipment]                       BIT            NOT NULL,
    [Insurance]                            BIT            NOT NULL,
    [InsuranceProvider]                    INT            NOT NULL,
    [ShipNameParseStatus]                  INT            NOT NULL,
    [ShipUnparsedName]                     NVARCHAR (100) NOT NULL,
    [OriginNameParseStatus]                INT            NOT NULL,
    [OriginUnparsedName]                   NVARCHAR (100) NOT NULL,
    [BestRateEvents]                       TINYINT        NOT NULL,
    CONSTRAINT [tmp_ms_xx_constraint_IX_Shipment_Other] UNIQUE NONCLUSTERED ([ShipmentID] ASC),
    CONSTRAINT [tmp_ms_xx_constraint_PK_Shipment] PRIMARY KEY CLUSTERED ([ShipmentID] ASC)
);

ALTER TABLE [dbo].[tmp_ms_xx_Shipment]
    ADD CONSTRAINT [SD_Shipment_1c10aed9206a457cadab606033623e71] DEFAULT 0 FOR [ShipAddressValidationSuggestionCount],
        CONSTRAINT [SD_Shipment_8f37506276a04bad947c24fe5d9bcb92] DEFAULT 0 FOR [ShipAddressValidationStatus],
        CONSTRAINT [SD_Shipment_4eaa111f8e794c0d9be1acebef8f72c3] DEFAULT N'' FOR [ShipAddressValidationError],
        CONSTRAINT [SD_Shipment_dcb8f7f5fc30461c9ceabc1e163e94f1] DEFAULT 0 FOR [ShipResidentialStatus],
        CONSTRAINT [SD_Shipment_e95c3ac6b763467aa8746873779f209e] DEFAULT 0 FOR [ShipPOBox],
        CONSTRAINT [SD_Shipment_8fc2ef5550214f73a2db7df845e9bf09] DEFAULT 0 FOR [ShipUSTerritory],
        CONSTRAINT [SD_Shipment_0e53cdb2b4bb4699a20fc80bdfa91a2b] DEFAULT 0 FOR [ShipMilitaryAddress];

IF EXISTS (SELECT TOP 1 1 
           FROM   [dbo].[Shipment])
    BEGIN
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_Shipment] ON;
        INSERT INTO [dbo].[tmp_ms_xx_Shipment] ([ShipmentID], [OrderID], [ShipmentType], [ContentWeight], [TotalWeight], [Processed], [ProcessedDate], [ProcessedUserID], [ProcessedComputerID], [ShipDate], [ShipmentCost], [Voided], [VoidedDate], [VoidedUserID], [VoidedComputerID], [TrackingNumber], [CustomsGenerated], [CustomsValue], [ThermalType], [ShipFirstName], [ShipMiddleName], [ShipLastName], [ShipCompany], [ShipStreet1], [ShipStreet2], [ShipStreet3], [ShipCity], [ShipStateProvCode], [ShipPostalCode], [ShipCountryCode], [ShipPhone], [ShipEmail], [ResidentialDetermination], [ResidentialResult], [OriginOriginID], [OriginFirstName], [OriginMiddleName], [OriginLastName], [OriginCompany], [OriginStreet1], [OriginStreet2], [OriginStreet3], [OriginCity], [OriginStateProvCode], [OriginPostalCode], [OriginCountryCode], [OriginPhone], [OriginFax], [OriginEmail], [OriginWebsite], [ReturnShipment], [Insurance], [InsuranceProvider], [ShipNameParseStatus], [ShipUnparsedName], [OriginNameParseStatus], [OriginUnparsedName], [BestRateEvents])
        SELECT   [ShipmentID],
                 [OrderID],
                 [ShipmentType],
                 [ContentWeight],
                 [TotalWeight],
                 [Processed],
                 [ProcessedDate],
                 [ProcessedUserID],
                 [ProcessedComputerID],
                 [ShipDate],
                 [ShipmentCost],
                 [Voided],
                 [VoidedDate],
                 [VoidedUserID],
                 [VoidedComputerID],
                 [TrackingNumber],
                 [CustomsGenerated],
                 [CustomsValue],
                 [ThermalType],
                 [ShipFirstName],
                 [ShipMiddleName],
                 [ShipLastName],
                 [ShipCompany],
                 [ShipStreet1],
                 [ShipStreet2],
                 [ShipStreet3],
                 [ShipCity],
                 [ShipStateProvCode],
                 [ShipPostalCode],
                 [ShipCountryCode],
                 [ShipPhone],
                 [ShipEmail],
                 [ResidentialDetermination],
                 [ResidentialResult],
                 [OriginOriginID],
                 [OriginFirstName],
                 [OriginMiddleName],
                 [OriginLastName],
                 [OriginCompany],
                 [OriginStreet1],
                 [OriginStreet2],
                 [OriginStreet3],
                 [OriginCity],
                 [OriginStateProvCode],
                 [OriginPostalCode],
                 [OriginCountryCode],
                 [OriginPhone],
                 [OriginFax],
                 [OriginEmail],
                 [OriginWebsite],
                 [ReturnShipment],
                 [Insurance],
                 [InsuranceProvider],
                 [ShipNameParseStatus],
                 [ShipUnparsedName],
                 [OriginNameParseStatus],
                 [OriginUnparsedName],
                 [BestRateEvents]
        FROM     [dbo].[Shipment]
        ORDER BY [ShipmentID] ASC;
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_Shipment] OFF;
    END

ALTER TABLE [dbo].[tmp_ms_xx_Shipment] DROP CONSTRAINT [SD_Shipment_1c10aed9206a457cadab606033623e71], CONSTRAINT [SD_Shipment_8f37506276a04bad947c24fe5d9bcb92], CONSTRAINT [SD_Shipment_4eaa111f8e794c0d9be1acebef8f72c3], CONSTRAINT [SD_Shipment_dcb8f7f5fc30461c9ceabc1e163e94f1], CONSTRAINT [SD_Shipment_e95c3ac6b763467aa8746873779f209e], CONSTRAINT [SD_Shipment_8fc2ef5550214f73a2db7df845e9bf09], CONSTRAINT [SD_Shipment_0e53cdb2b4bb4699a20fc80bdfa91a2b];

DROP TABLE [dbo].[Shipment];

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_Shipment]', N'Shipment';

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_constraint_IX_Shipment_Other]', N'IX_Shipment_Other', N'OBJECT';

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_constraint_PK_Shipment]', N'PK_Shipment', N'OBJECT';

COMMIT TRANSACTION;

SET TRANSACTION ISOLATION LEVEL READ COMMITTED;


GO
PRINT N'Creating [dbo].[Shipment].[IX_Shipment_OrderID]...';


GO
CREATE NONCLUSTERED INDEX [IX_Shipment_OrderID]
    ON [dbo].[Shipment]([OrderID] ASC);


GO
ALTER TABLE [dbo].[Shipment] ENABLE CHANGE_TRACKING WITH (TRACK_COLUMNS_UPDATED = OFF);


GO
PRINT N'Starting rebuilding table [dbo].[Store]...';


GO
BEGIN TRANSACTION;

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

SET XACT_ABORT ON;

CREATE TABLE [dbo].[tmp_ms_xx_Store] (
    [StoreID]                  BIGINT         IDENTITY (1005, 1000) NOT NULL,
    [RowVersion]               ROWVERSION     NOT NULL,
    [License]                  NVARCHAR (150) NOT NULL,
    [Edition]                  NVARCHAR (MAX) NOT NULL,
    [TypeCode]                 INT            NOT NULL,
    [Enabled]                  BIT            NOT NULL,
    [SetupComplete]            BIT            NOT NULL,
    [StoreName]                NVARCHAR (75)  NOT NULL,
    [Company]                  NVARCHAR (60)  NOT NULL,
    [Street1]                  NVARCHAR (60)  NOT NULL,
    [Street2]                  NVARCHAR (60)  NOT NULL,
    [Street3]                  NVARCHAR (60)  NOT NULL,
    [City]                     NVARCHAR (50)  NOT NULL,
    [StateProvCode]            NVARCHAR (50)  NOT NULL,
    [PostalCode]               NVARCHAR (20)  NOT NULL,
    [CountryCode]              NVARCHAR (50)  NOT NULL,
    [Phone]                    NVARCHAR (25)  NOT NULL,
    [Fax]                      NVARCHAR (35)  NOT NULL,
    [Email]                    NVARCHAR (100) NOT NULL,
    [Website]                  NVARCHAR (50)  NOT NULL,
    [AutoDownload]             BIT            NOT NULL,
    [AutoDownloadMinutes]      INT            NOT NULL,
    [AutoDownloadOnlyAway]     BIT            NOT NULL,
    [AddressValidationSetting] INT            NOT NULL,
    [ComputerDownloadPolicy]   NVARCHAR (MAX) NOT NULL,
    [DefaultEmailAccountID]    BIGINT         NOT NULL,
    [ManualOrderPrefix]        NVARCHAR (10)  NOT NULL,
    [ManualOrderPostfix]       NVARCHAR (10)  NOT NULL,
    [InitialDownloadDays]      INT            NULL,
    [InitialDownloadOrder]     BIGINT         NULL,
    CONSTRAINT [tmp_ms_xx_constraint_PK_Store] PRIMARY KEY CLUSTERED ([StoreID] ASC)
);

ALTER TABLE [dbo].[tmp_ms_xx_Store]
    ADD CONSTRAINT [SD_Store_b82662124b69400082e0b961fec8257e] DEFAULT 0 FOR [AddressValidationSetting];

IF EXISTS (SELECT TOP 1 1 
           FROM   [dbo].[Store])
    BEGIN
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_Store] ON;
        INSERT INTO [dbo].[tmp_ms_xx_Store] ([StoreID], [License], [Edition], [TypeCode], [Enabled], [SetupComplete], [StoreName], [Company], [Street1], [Street2], [Street3], [City], [StateProvCode], [PostalCode], [CountryCode], [Phone], [Fax], [Email], [Website], [AutoDownload], [AutoDownloadMinutes], [AutoDownloadOnlyAway], [ComputerDownloadPolicy], [DefaultEmailAccountID], [ManualOrderPrefix], [ManualOrderPostfix], [InitialDownloadDays], [InitialDownloadOrder])
        SELECT   [StoreID],
                 [License],
                 [Edition],
                 [TypeCode],
                 [Enabled],
                 [SetupComplete],
                 [StoreName],
                 [Company],
                 [Street1],
                 [Street2],
                 [Street3],
                 [City],
                 [StateProvCode],
                 [PostalCode],
                 [CountryCode],
                 [Phone],
                 [Fax],
                 [Email],
                 [Website],
                 [AutoDownload],
                 [AutoDownloadMinutes],
                 [AutoDownloadOnlyAway],
                 [ComputerDownloadPolicy],
                 [DefaultEmailAccountID],
                 [ManualOrderPrefix],
                 [ManualOrderPostfix],
                 [InitialDownloadDays],
                 [InitialDownloadOrder]
        FROM     [dbo].[Store]
        ORDER BY [StoreID] ASC;
        SET IDENTITY_INSERT [dbo].[tmp_ms_xx_Store] OFF;
    END

ALTER TABLE [dbo].[tmp_ms_xx_Store] DROP CONSTRAINT [SD_Store_b82662124b69400082e0b961fec8257e];

DROP TABLE [dbo].[Store];

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_Store]', N'Store';

EXECUTE sp_rename N'[dbo].[tmp_ms_xx_constraint_PK_Store]', N'PK_Store', N'OBJECT';

COMMIT TRANSACTION;

SET TRANSACTION ISOLATION LEVEL READ COMMITTED;


GO
PRINT N'Creating [dbo].[Store].[IX_Store_StoreName]...';


GO
CREATE UNIQUE NONCLUSTERED INDEX [IX_Store_StoreName]
    ON [dbo].[Store]([StoreName] ASC);


GO
ALTER TABLE [dbo].[Store] ENABLE CHANGE_TRACKING WITH (TRACK_COLUMNS_UPDATED = OFF);


GO
PRINT N'Creating [dbo].[UpdateQueue]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[UpdateQueue] (
    [UpdateQueueID]             INT           IDENTITY (1, 1) NOT NULL,
    [UpdateDatabaseProcessType] VARCHAR (200) NOT NULL,
    PRIMARY KEY CLUSTERED ([UpdateQueueID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[ValidatedAddress]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
CREATE TABLE [dbo].[ValidatedAddress] (
    [ValidatedAddressID]     BIGINT        IDENTITY (1100, 1000) NOT NULL,
    [ConsumerID]             BIGINT        NOT NULL,
    [AddressPrefix]          NVARCHAR (10) NOT NULL,
    [IsOriginal]             BIT           NOT NULL,
    [Street1]                NVARCHAR (60) NOT NULL,
    [Street2]                NVARCHAR (60) NOT NULL,
    [Street3]                NVARCHAR (60) NOT NULL,
    [City]                   NVARCHAR (50) NOT NULL,
    [StateProvCode]          NVARCHAR (50) NOT NULL,
    [PostalCode]             NVARCHAR (20) NOT NULL,
    [CountryCode]            NVARCHAR (50) NOT NULL,
    [ResidentialStatus]      INT           NOT NULL,
    [POBox]                  INT           NOT NULL,
    [USTerritory] INT           NOT NULL,
    [MilitaryAddress]        INT           NOT NULL,
    CONSTRAINT [PK_ValidatedAddress] PRIMARY KEY CLUSTERED ([ValidatedAddressID] ASC)
);


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[ValidatedAddress].[IX_ValidatedAddress_ConsumerIDAddressPrefix]...';


GO
CREATE NONCLUSTERED INDEX [IX_ValidatedAddress_ConsumerIDAddressPrefix]
    ON [dbo].[ValidatedAddress]([ConsumerID] ASC, [AddressPrefix] ASC);


GO
PRINT N'Creating FK_AmazonOrder_Order...';


GO
ALTER TABLE [dbo].[AmazonOrder] WITH NOCHECK
    ADD CONSTRAINT [FK_AmazonOrder_Order] FOREIGN KEY ([OrderID]) REFERENCES [dbo].[Order] ([OrderID]);


GO
PRINT N'Creating FK_ChannelAdvisorOrder_Order...';


GO
ALTER TABLE [dbo].[ChannelAdvisorOrder] WITH NOCHECK
    ADD CONSTRAINT [FK_ChannelAdvisorOrder_Order] FOREIGN KEY ([OrderID]) REFERENCES [dbo].[Order] ([OrderID]);


GO
PRINT N'Creating FK_ClickCartProOrder_Order...';


GO
ALTER TABLE [dbo].[ClickCartProOrder] WITH NOCHECK
    ADD CONSTRAINT [FK_ClickCartProOrder_Order] FOREIGN KEY ([OrderID]) REFERENCES [dbo].[Order] ([OrderID]);


GO
PRINT N'Creating FK_CommerceInterfaceOrder_Order...';


GO
ALTER TABLE [dbo].[CommerceInterfaceOrder] WITH NOCHECK
    ADD CONSTRAINT [FK_CommerceInterfaceOrder_Order] FOREIGN KEY ([OrderID]) REFERENCES [dbo].[Order] ([OrderID]);


GO
PRINT N'Creating FK_EbayOrder_Order...';


GO
ALTER TABLE [dbo].[EbayOrder] WITH NOCHECK
    ADD CONSTRAINT [FK_EbayOrder_Order] FOREIGN KEY ([OrderID]) REFERENCES [dbo].[Order] ([OrderID]);


GO
PRINT N'Creating FK_EtsyOrder_Order...';


GO
ALTER TABLE [dbo].[EtsyOrder] WITH NOCHECK
    ADD CONSTRAINT [FK_EtsyOrder_Order] FOREIGN KEY ([OrderID]) REFERENCES [dbo].[Order] ([OrderID]);


GO
PRINT N'Creating FK_MagentoOrder_Order...';


GO
ALTER TABLE [dbo].[MagentoOrder] WITH NOCHECK
    ADD CONSTRAINT [FK_MagentoOrder_Order] FOREIGN KEY ([OrderID]) REFERENCES [dbo].[Order] ([OrderID]);


GO
PRINT N'Creating FK_MarketworksOrder_Order...';


GO
ALTER TABLE [dbo].[MarketplaceAdvisorOrder] WITH NOCHECK
    ADD CONSTRAINT [FK_MarketworksOrder_Order] FOREIGN KEY ([OrderID]) REFERENCES [dbo].[Order] ([OrderID]);


GO
PRINT N'Creating FK_NetworkSolutionsOrder_Order...';


GO
ALTER TABLE [dbo].[NetworkSolutionsOrder] WITH NOCHECK
    ADD CONSTRAINT [FK_NetworkSolutionsOrder_Order] FOREIGN KEY ([OrderID]) REFERENCES [dbo].[Order] ([OrderID]);


GO
PRINT N'Creating FK_NeweggOrder_Order...';


GO
ALTER TABLE [dbo].[NeweggOrder] WITH NOCHECK
    ADD CONSTRAINT [FK_NeweggOrder_Order] FOREIGN KEY ([OrderID]) REFERENCES [dbo].[Order] ([OrderID]);


GO
PRINT N'Creating FK_Order_Customer...';


GO
ALTER TABLE [dbo].[Order] WITH NOCHECK
    ADD CONSTRAINT [FK_Order_Customer] FOREIGN KEY ([CustomerID]) REFERENCES [dbo].[Customer] ([CustomerID]);


GO
PRINT N'Creating FK_Order_Store...';


GO
ALTER TABLE [dbo].[Order] WITH NOCHECK
    ADD CONSTRAINT [FK_Order_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_OrderCharge_Order...';


GO
ALTER TABLE [dbo].[OrderCharge] WITH NOCHECK
    ADD CONSTRAINT [FK_OrderCharge_Order] FOREIGN KEY ([OrderID]) REFERENCES [dbo].[Order] ([OrderID]);


GO
PRINT N'Creating FK_OrderItem_Order...';


GO
ALTER TABLE [dbo].[OrderItem] WITH NOCHECK
    ADD CONSTRAINT [FK_OrderItem_Order] FOREIGN KEY ([OrderID]) REFERENCES [dbo].[Order] ([OrderID]);


GO
PRINT N'Creating FK_OrderMotionOrder_Order...';


GO
ALTER TABLE [dbo].[OrderMotionOrder] WITH NOCHECK
    ADD CONSTRAINT [FK_OrderMotionOrder_Order] FOREIGN KEY ([OrderID]) REFERENCES [dbo].[Order] ([OrderID]);


GO
PRINT N'Creating FK_OrderPaymentDetail_Order...';


GO
ALTER TABLE [dbo].[OrderPaymentDetail] WITH NOCHECK
    ADD CONSTRAINT [FK_OrderPaymentDetail_Order] FOREIGN KEY ([OrderID]) REFERENCES [dbo].[Order] ([OrderID]);


GO
PRINT N'Creating FK_PayPalOrder_Order...';


GO
ALTER TABLE [dbo].[PayPalOrder] WITH NOCHECK
    ADD CONSTRAINT [FK_PayPalOrder_Order] FOREIGN KEY ([OrderID]) REFERENCES [dbo].[Order] ([OrderID]);


GO
PRINT N'Creating FK_ProStoresOrder_Order...';


GO
ALTER TABLE [dbo].[ProStoresOrder] WITH NOCHECK
    ADD CONSTRAINT [FK_ProStoresOrder_Order] FOREIGN KEY ([OrderID]) REFERENCES [dbo].[Order] ([OrderID]);


GO
PRINT N'Creating FK_SearsOrder_Order...';


GO
ALTER TABLE [dbo].[SearsOrder] WITH NOCHECK
    ADD CONSTRAINT [FK_SearsOrder_Order] FOREIGN KEY ([OrderID]) REFERENCES [dbo].[Order] ([OrderID]);


GO
PRINT N'Creating FK_Shipment_Order...';


GO
ALTER TABLE [dbo].[Shipment] WITH NOCHECK
    ADD CONSTRAINT [FK_Shipment_Order] FOREIGN KEY ([OrderID]) REFERENCES [dbo].[Order] ([OrderID]);


GO
PRINT N'Creating FK_ShopifyOrder_Order...';


GO
ALTER TABLE [dbo].[ShopifyOrder] WITH NOCHECK
    ADD CONSTRAINT [FK_ShopifyOrder_Order] FOREIGN KEY ([OrderID]) REFERENCES [dbo].[Order] ([OrderID]);


GO
PRINT N'Creating FK_YahooOrder_Order...';


GO
ALTER TABLE [dbo].[YahooOrder] WITH NOCHECK
    ADD CONSTRAINT [FK_YahooOrder_Order] FOREIGN KEY ([OrderID]) REFERENCES [dbo].[Order] ([OrderID]);


GO
PRINT N'Creating FK_BestRateShipment_Shipment...';


GO
ALTER TABLE [dbo].[BestRateShipment] WITH NOCHECK
    ADD CONSTRAINT [FK_BestRateShipment_Shipment] FOREIGN KEY ([ShipmentID]) REFERENCES [dbo].[Shipment] ([ShipmentID]) ON DELETE CASCADE;


GO
PRINT N'Creating FK_EquashipShipment_Shipment...';


GO
ALTER TABLE [dbo].[EquaShipShipment] WITH NOCHECK
    ADD CONSTRAINT [FK_EquashipShipment_Shipment] FOREIGN KEY ([ShipmentID]) REFERENCES [dbo].[Shipment] ([ShipmentID]) ON DELETE CASCADE;


GO
PRINT N'Creating FK_FedExShipment_Shipment...';


GO
ALTER TABLE [dbo].[FedExShipment] WITH NOCHECK
    ADD CONSTRAINT [FK_FedExShipment_Shipment] FOREIGN KEY ([ShipmentID]) REFERENCES [dbo].[Shipment] ([ShipmentID]) ON DELETE CASCADE;


GO
PRINT N'Creating FK_iParcelShipment_Shipment...';


GO
ALTER TABLE [dbo].[iParcelShipment] WITH NOCHECK
    ADD CONSTRAINT [FK_iParcelShipment_Shipment] FOREIGN KEY ([ShipmentID]) REFERENCES [dbo].[Shipment] ([ShipmentID]) ON DELETE CASCADE;


GO
PRINT N'Creating FK_OnTracShipment_Shipment...';


GO
ALTER TABLE [dbo].[OnTracShipment] WITH NOCHECK
    ADD CONSTRAINT [FK_OnTracShipment_Shipment] FOREIGN KEY ([ShipmentID]) REFERENCES [dbo].[Shipment] ([ShipmentID]) ON DELETE CASCADE;


GO
PRINT N'Creating FK_OtherShipment_Shipment...';


GO
ALTER TABLE [dbo].[OtherShipment] WITH NOCHECK
    ADD CONSTRAINT [FK_OtherShipment_Shipment] FOREIGN KEY ([ShipmentID]) REFERENCES [dbo].[Shipment] ([ShipmentID]) ON DELETE CASCADE;


GO
PRINT N'Creating FK_PostalShipment_Shipment...';


GO
ALTER TABLE [dbo].[PostalShipment] WITH NOCHECK
    ADD CONSTRAINT [FK_PostalShipment_Shipment] FOREIGN KEY ([ShipmentID]) REFERENCES [dbo].[Shipment] ([ShipmentID]) ON DELETE CASCADE;


GO
PRINT N'Creating FK_Shipment_ProcessedComputer...';


GO
ALTER TABLE [dbo].[Shipment] WITH NOCHECK
    ADD CONSTRAINT [FK_Shipment_ProcessedComputer] FOREIGN KEY ([ProcessedComputerID]) REFERENCES [dbo].[Computer] ([ComputerID]);


GO
PRINT N'Creating FK_Shipment_ProcessedUser...';


GO
ALTER TABLE [dbo].[Shipment] WITH NOCHECK
    ADD CONSTRAINT [FK_Shipment_ProcessedUser] FOREIGN KEY ([ProcessedUserID]) REFERENCES [dbo].[User] ([UserID]);


GO
PRINT N'Creating FK_Shipment_VoidedComputer...';


GO
ALTER TABLE [dbo].[Shipment] WITH NOCHECK
    ADD CONSTRAINT [FK_Shipment_VoidedComputer] FOREIGN KEY ([VoidedComputerID]) REFERENCES [dbo].[Computer] ([ComputerID]);


GO
PRINT N'Creating FK_Shipment_VoidedUser...';


GO
ALTER TABLE [dbo].[Shipment] WITH NOCHECK
    ADD CONSTRAINT [FK_Shipment_VoidedUser] FOREIGN KEY ([VoidedUserID]) REFERENCES [dbo].[User] ([UserID]);


GO
PRINT N'Creating FK_ShipmentCustomsItem_Shipment...';


GO
ALTER TABLE [dbo].[ShipmentCustomsItem] WITH NOCHECK
    ADD CONSTRAINT [FK_ShipmentCustomsItem_Shipment] FOREIGN KEY ([ShipmentID]) REFERENCES [dbo].[Shipment] ([ShipmentID]) ON DELETE CASCADE;


GO
PRINT N'Creating FK_UpsShipment_Shipment...';


GO
ALTER TABLE [dbo].[UpsShipment] WITH NOCHECK
    ADD CONSTRAINT [FK_UpsShipment_Shipment] FOREIGN KEY ([ShipmentID]) REFERENCES [dbo].[Shipment] ([ShipmentID]) ON DELETE CASCADE;


GO
PRINT N'Creating FK_AmazonStore_Store...';


GO
ALTER TABLE [dbo].[AmazonStore] WITH NOCHECK
    ADD CONSTRAINT [FK_AmazonStore_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_AmeriCommerceStore_Store...';


GO
ALTER TABLE [dbo].[AmeriCommerceStore] WITH NOCHECK
    ADD CONSTRAINT [FK_AmeriCommerceStore_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_BigCommerceStore_Store...';


GO
ALTER TABLE [dbo].[BigCommerceStore] WITH NOCHECK
    ADD CONSTRAINT [FK_BigCommerceStore_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_BuyComStore_Store...';


GO
ALTER TABLE [dbo].[BuyDotComStore] WITH NOCHECK
    ADD CONSTRAINT [FK_BuyComStore_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_ChannelAdvisorStore_Store...';


GO
ALTER TABLE [dbo].[ChannelAdvisorStore] WITH NOCHECK
    ADD CONSTRAINT [FK_ChannelAdvisorStore_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_Download_Store...';


GO
ALTER TABLE [dbo].[Download] WITH NOCHECK
    ADD CONSTRAINT [FK_Download_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]) ON DELETE CASCADE;


GO
PRINT N'Creating FK_EbayStore_Store...';


GO
ALTER TABLE [dbo].[EbayStore] WITH NOCHECK
    ADD CONSTRAINT [FK_EbayStore_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_EtsyStore_Store...';


GO
ALTER TABLE [dbo].[EtsyStore] WITH NOCHECK
    ADD CONSTRAINT [FK_EtsyStore_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_GenericFileStore_Store...';


GO
ALTER TABLE [dbo].[GenericFileStore] WITH NOCHECK
    ADD CONSTRAINT [FK_GenericFileStore_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_GenericModuleStore_Store...';


GO
ALTER TABLE [dbo].[GenericModuleStore] WITH NOCHECK
    ADD CONSTRAINT [FK_GenericModuleStore_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_InfopiaStore_InfopiaStore...';


GO
ALTER TABLE [dbo].[InfopiaStore] WITH NOCHECK
    ADD CONSTRAINT [FK_InfopiaStore_InfopiaStore] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_MarketworksStore_Store...';


GO
ALTER TABLE [dbo].[MarketplaceAdvisorStore] WITH NOCHECK
    ADD CONSTRAINT [FK_MarketworksStore_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_NetworkSolutionsStore_Store...';


GO
ALTER TABLE [dbo].[NetworkSolutionsStore] WITH NOCHECK
    ADD CONSTRAINT [FK_NetworkSolutionsStore_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_NeweggStore_Store...';


GO
ALTER TABLE [dbo].[NeweggStore] WITH NOCHECK
    ADD CONSTRAINT [FK_NeweggStore_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_OrderMotionStore_Store...';


GO
ALTER TABLE [dbo].[OrderMotionStore] WITH NOCHECK
    ADD CONSTRAINT [FK_OrderMotionStore_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_PayPalStore_Store...';


GO
ALTER TABLE [dbo].[PayPalStore] WITH NOCHECK
    ADD CONSTRAINT [FK_PayPalStore_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_ProStoresStore_Store...';


GO
ALTER TABLE [dbo].[ProStoresStore] WITH NOCHECK
    ADD CONSTRAINT [FK_ProStoresStore_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_SearsStore_Store...';


GO
ALTER TABLE [dbo].[SearsStore] WITH NOCHECK
    ADD CONSTRAINT [FK_SearsStore_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_ShopifyStore_Store...';


GO
ALTER TABLE [dbo].[ShopifyStore] WITH NOCHECK
    ADD CONSTRAINT [FK_ShopifyStore_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_StatusPreset_Store...';


GO
ALTER TABLE [dbo].[StatusPreset] WITH NOCHECK
    ADD CONSTRAINT [FK_StatusPreset_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]) ON DELETE CASCADE;


GO
PRINT N'Creating FK_StoreShopSite_Store...';


GO
ALTER TABLE [dbo].[ShopSiteStore] WITH NOCHECK
    ADD CONSTRAINT [FK_StoreShopSite_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_ThreeDCartStore_Store...';


GO
ALTER TABLE [dbo].[ThreeDCartStore] WITH NOCHECK
    ADD CONSTRAINT [FK_ThreeDCartStore_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_VolusionStore_Store...';


GO
ALTER TABLE [dbo].[VolusionStore] WITH NOCHECK
    ADD CONSTRAINT [FK_VolusionStore_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);


GO
PRINT N'Creating FK_YahooStore_Store...';


GO
ALTER TABLE [dbo].[YahooStore] WITH NOCHECK
    ADD CONSTRAINT [FK_YahooStore_Store] FOREIGN KEY ([StoreID]) REFERENCES [dbo].[Store] ([StoreID]);

GO

PRINT N'Creating [dbo].[Order].[StoreID].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'4', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Order', @level2type = N'COLUMN', @level2name = N'StoreID';


GO
PRINT N'Creating [dbo].[Order].[StoreID].[AuditName]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditName', @value = N'Store', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Order', @level2type = N'COLUMN', @level2name = N'StoreID';


GO
PRINT N'Creating [dbo].[Order].[CustomerID].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'4', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Order', @level2type = N'COLUMN', @level2name = N'CustomerID';


GO
PRINT N'Creating [dbo].[Order].[CustomerID].[AuditName]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditName', @value = N'Customer', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Order', @level2type = N'COLUMN', @level2name = N'CustomerID';


GO
PRINT N'Creating [dbo].[Order].[OrderNumber].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'1', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Order', @level2type = N'COLUMN', @level2name = N'OrderNumber';


GO
PRINT N'Creating [dbo].[Order].[OrderNumberComplete].[AuditName]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditName', @value = N'Order Number', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Order', @level2type = N'COLUMN', @level2name = N'OrderNumberComplete';


GO
PRINT N'Creating [dbo].[Order].[OrderTotal].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'2', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Order', @level2type = N'COLUMN', @level2name = N'OrderTotal';


GO
PRINT N'Creating [dbo].[Order].[OnlineCustomerID].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'1', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Order', @level2type = N'COLUMN', @level2name = N'OnlineCustomerID';


GO
PRINT N'Creating [dbo].[Order].[OnlineStatusCode].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'1', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Order', @level2type = N'COLUMN', @level2name = N'OnlineStatusCode';


GO
PRINT N'Creating [dbo].[Order].[BillStateProvCode].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'5', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Order', @level2type = N'COLUMN', @level2name = N'BillStateProvCode';


GO
PRINT N'Creating [dbo].[Order].[BillStateProvCode].[AuditName]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditName', @value = N'BillState', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Order', @level2type = N'COLUMN', @level2name = N'BillStateProvCode';


GO
PRINT N'Creating [dbo].[Order].[BillCountryCode].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'6', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Order', @level2type = N'COLUMN', @level2name = N'BillCountryCode';


GO
PRINT N'Creating [dbo].[Order].[BillCountryCode].[AuditName]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditName', @value = N'BillCountry', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Order', @level2type = N'COLUMN', @level2name = N'BillCountryCode';


GO
PRINT N'Creating [dbo].[Order].[ShipStateProvCode].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'5', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Order', @level2type = N'COLUMN', @level2name = N'ShipStateProvCode';


GO
PRINT N'Creating [dbo].[Order].[ShipStateProvCode].[AuditName]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditName', @value = N'ShipState', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Order', @level2type = N'COLUMN', @level2name = N'ShipStateProvCode';


GO
PRINT N'Creating [dbo].[Order].[ShipCountryCode].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'6', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Order', @level2type = N'COLUMN', @level2name = N'ShipCountryCode';


GO
PRINT N'Creating [dbo].[Order].[ShipCountryCode].[AuditName]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditName', @value = N'ShipCountry', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Order', @level2type = N'COLUMN', @level2name = N'ShipCountryCode';


GO
PRINT N'Creating [dbo].[Order].[BillNameParseStatus].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'1', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Order', @level2type = N'COLUMN', @level2name = N'BillNameParseStatus';


GO
PRINT N'Creating [dbo].[Order].[ShipNameParseStatus].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'1', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Order', @level2type = N'COLUMN', @level2name = N'ShipNameParseStatus';


GO
PRINT N'Creating [dbo].[Shipment].[ShipmentType].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'103', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'ShipmentType';


GO
PRINT N'Creating [dbo].[Shipment].[ContentWeight].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'1', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'ContentWeight';


GO
PRINT N'Creating [dbo].[Shipment].[TotalWeight].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'3', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'TotalWeight';


GO
PRINT N'Creating [dbo].[Shipment].[ShipDate].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'7', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'ShipDate';


GO
PRINT N'Creating [dbo].[Shipment].[ShipmentCost].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'2', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'ShipmentCost';


GO
PRINT N'Creating [dbo].[Shipment].[CustomsGenerated].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'1', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'CustomsGenerated';


GO
PRINT N'Creating [dbo].[Shipment].[CustomsValue].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'2', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'CustomsValue';


GO
PRINT N'Creating [dbo].[Shipment].[ShipStateProvCode].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'5', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'ShipStateProvCode';


GO
PRINT N'Creating [dbo].[Shipment].[ShipStateProvCode].[AuditName]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditName', @value = N'ShipState', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'ShipStateProvCode';


GO
PRINT N'Creating [dbo].[Shipment].[ShipCountryCode].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'6', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'ShipCountryCode';


GO
PRINT N'Creating [dbo].[Shipment].[ShipCountryCode].[AuditName]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditName', @value = N'ShipCountry', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'ShipCountryCode';


GO
PRINT N'Creating [dbo].[Shipment].[ResidentialDetermination].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'111', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'ResidentialDetermination';


GO
PRINT N'Creating [dbo].[Shipment].[ResidentialDetermination].[AuditName]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditName', @value = N'Residential \ Commercial', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'ResidentialDetermination';


GO
PRINT N'Creating [dbo].[Shipment].[ResidentialResult].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'1', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'ResidentialResult';


GO
PRINT N'Creating [dbo].[Shipment].[OriginOriginID].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'4', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'OriginOriginID';


GO
PRINT N'Creating [dbo].[Shipment].[OriginStateProvCode].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'5', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'OriginStateProvCode';


GO
PRINT N'Creating [dbo].[Shipment].[OriginStateProvCode].[AuditName]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditName', @value = N'OriginState', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'OriginStateProvCode';


GO
PRINT N'Creating [dbo].[Shipment].[OriginCountryCode].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'6', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'OriginCountryCode';


GO
PRINT N'Creating [dbo].[Shipment].[OriginCountryCode].[AuditName]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditName', @value = N'OriginCountry', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'OriginCountryCode';


GO
PRINT N'Creating [dbo].[Shipment].[InsuranceProvider].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'112', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'InsuranceProvider';


GO
PRINT N'Creating [dbo].[Shipment].[InsuranceProvider].[AuditName]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditName', @value = N'Insurance', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'InsuranceProvider';


GO
PRINT N'Creating [dbo].[Shipment].[ShipNameParseStatus].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'1', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'ShipNameParseStatus';


GO
PRINT N'Creating [dbo].[Shipment].[OriginNameParseStatus].[AuditFormat]...';


GO
EXECUTE sp_addextendedproperty @name = N'AuditFormat', @value = N'1', @level0type = N'SCHEMA', @level0name = N'dbo', @level1type = N'TABLE', @level1name = N'Shipment', @level2type = N'COLUMN', @level2name = N'OriginNameParseStatus';


GO
-- Refactoring step to update target server with deployed transaction logs

IF OBJECT_ID(N'dbo.__RefactorLog') IS NULL
BEGIN
    CREATE TABLE [dbo].[__RefactorLog] (OperationKey UNIQUEIDENTIFIER NOT NULL PRIMARY KEY)
    EXEC sp_addextendedproperty N'microsoft_database_tools_support', N'refactoring log', N'schema', N'dbo', N'table', N'__RefactorLog'
END
GO
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '0c74f1f2-5daf-4a3c-94d6-07ea7e9a1e58')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('0c74f1f2-5daf-4a3c-94d6-07ea7e9a1e58')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '4ed1e7a8-6e41-4a51-864b-f9934613b641')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('4ed1e7a8-6e41-4a51-864b-f9934613b641')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '5a268481-3a79-4e4e-b7cf-d190c55d8f7d')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('5a268481-3a79-4e4e-b7cf-d190c55d8f7d')

GO

GO
PRINT N'Checking existing data against newly created constraints';


GO
USE [$(DatabaseName)];


GO
ALTER TABLE [dbo].[AmazonOrder] WITH CHECK CHECK CONSTRAINT [FK_AmazonOrder_Order];

ALTER TABLE [dbo].[ChannelAdvisorOrder] WITH CHECK CHECK CONSTRAINT [FK_ChannelAdvisorOrder_Order];

ALTER TABLE [dbo].[ClickCartProOrder] WITH CHECK CHECK CONSTRAINT [FK_ClickCartProOrder_Order];

ALTER TABLE [dbo].[CommerceInterfaceOrder] WITH CHECK CHECK CONSTRAINT [FK_CommerceInterfaceOrder_Order];

ALTER TABLE [dbo].[EbayOrder] WITH CHECK CHECK CONSTRAINT [FK_EbayOrder_Order];

ALTER TABLE [dbo].[EtsyOrder] WITH CHECK CHECK CONSTRAINT [FK_EtsyOrder_Order];

ALTER TABLE [dbo].[MagentoOrder] WITH CHECK CHECK CONSTRAINT [FK_MagentoOrder_Order];

ALTER TABLE [dbo].[MarketplaceAdvisorOrder] WITH CHECK CHECK CONSTRAINT [FK_MarketworksOrder_Order];

ALTER TABLE [dbo].[NetworkSolutionsOrder] WITH CHECK CHECK CONSTRAINT [FK_NetworkSolutionsOrder_Order];

ALTER TABLE [dbo].[NeweggOrder] WITH CHECK CHECK CONSTRAINT [FK_NeweggOrder_Order];

ALTER TABLE [dbo].[Order] WITH CHECK CHECK CONSTRAINT [FK_Order_Customer];

ALTER TABLE [dbo].[Order] WITH CHECK CHECK CONSTRAINT [FK_Order_Store];

ALTER TABLE [dbo].[OrderCharge] WITH CHECK CHECK CONSTRAINT [FK_OrderCharge_Order];

ALTER TABLE [dbo].[OrderItem] WITH CHECK CHECK CONSTRAINT [FK_OrderItem_Order];

ALTER TABLE [dbo].[OrderMotionOrder] WITH CHECK CHECK CONSTRAINT [FK_OrderMotionOrder_Order];

ALTER TABLE [dbo].[OrderPaymentDetail] WITH CHECK CHECK CONSTRAINT [FK_OrderPaymentDetail_Order];

ALTER TABLE [dbo].[PayPalOrder] WITH CHECK CHECK CONSTRAINT [FK_PayPalOrder_Order];

ALTER TABLE [dbo].[ProStoresOrder] WITH CHECK CHECK CONSTRAINT [FK_ProStoresOrder_Order];

ALTER TABLE [dbo].[SearsOrder] WITH CHECK CHECK CONSTRAINT [FK_SearsOrder_Order];

ALTER TABLE [dbo].[Shipment] WITH CHECK CHECK CONSTRAINT [FK_Shipment_Order];

ALTER TABLE [dbo].[ShopifyOrder] WITH CHECK CHECK CONSTRAINT [FK_ShopifyOrder_Order];

ALTER TABLE [dbo].[YahooOrder] WITH CHECK CHECK CONSTRAINT [FK_YahooOrder_Order];

ALTER TABLE [dbo].[BestRateShipment] WITH CHECK CHECK CONSTRAINT [FK_BestRateShipment_Shipment];

ALTER TABLE [dbo].[EquaShipShipment] WITH CHECK CHECK CONSTRAINT [FK_EquashipShipment_Shipment];

ALTER TABLE [dbo].[FedExShipment] WITH CHECK CHECK CONSTRAINT [FK_FedExShipment_Shipment];

ALTER TABLE [dbo].[iParcelShipment] WITH CHECK CHECK CONSTRAINT [FK_iParcelShipment_Shipment];

ALTER TABLE [dbo].[OnTracShipment] WITH CHECK CHECK CONSTRAINT [FK_OnTracShipment_Shipment];

ALTER TABLE [dbo].[OtherShipment] WITH CHECK CHECK CONSTRAINT [FK_OtherShipment_Shipment];

ALTER TABLE [dbo].[PostalShipment] WITH CHECK CHECK CONSTRAINT [FK_PostalShipment_Shipment];

ALTER TABLE [dbo].[Shipment] WITH CHECK CHECK CONSTRAINT [FK_Shipment_ProcessedComputer];

ALTER TABLE [dbo].[Shipment] WITH CHECK CHECK CONSTRAINT [FK_Shipment_ProcessedUser];

ALTER TABLE [dbo].[Shipment] WITH CHECK CHECK CONSTRAINT [FK_Shipment_VoidedComputer];

ALTER TABLE [dbo].[Shipment] WITH CHECK CHECK CONSTRAINT [FK_Shipment_VoidedUser];

ALTER TABLE [dbo].[ShipmentCustomsItem] WITH CHECK CHECK CONSTRAINT [FK_ShipmentCustomsItem_Shipment];

ALTER TABLE [dbo].[UpsShipment] WITH CHECK CHECK CONSTRAINT [FK_UpsShipment_Shipment];

ALTER TABLE [dbo].[AmazonStore] WITH CHECK CHECK CONSTRAINT [FK_AmazonStore_Store];

ALTER TABLE [dbo].[AmeriCommerceStore] WITH CHECK CHECK CONSTRAINT [FK_AmeriCommerceStore_Store];

ALTER TABLE [dbo].[BigCommerceStore] WITH CHECK CHECK CONSTRAINT [FK_BigCommerceStore_Store];

ALTER TABLE [dbo].[BuyDotComStore] WITH CHECK CHECK CONSTRAINT [FK_BuyComStore_Store];

ALTER TABLE [dbo].[ChannelAdvisorStore] WITH CHECK CHECK CONSTRAINT [FK_ChannelAdvisorStore_Store];

ALTER TABLE [dbo].[Download] WITH CHECK CHECK CONSTRAINT [FK_Download_Store];

ALTER TABLE [dbo].[EbayStore] WITH CHECK CHECK CONSTRAINT [FK_EbayStore_Store];

ALTER TABLE [dbo].[EtsyStore] WITH CHECK CHECK CONSTRAINT [FK_EtsyStore_Store];

ALTER TABLE [dbo].[GenericFileStore] WITH CHECK CHECK CONSTRAINT [FK_GenericFileStore_Store];

ALTER TABLE [dbo].[GenericModuleStore] WITH CHECK CHECK CONSTRAINT [FK_GenericModuleStore_Store];

ALTER TABLE [dbo].[InfopiaStore] WITH CHECK CHECK CONSTRAINT [FK_InfopiaStore_InfopiaStore];

ALTER TABLE [dbo].[MarketplaceAdvisorStore] WITH CHECK CHECK CONSTRAINT [FK_MarketworksStore_Store];

ALTER TABLE [dbo].[NetworkSolutionsStore] WITH CHECK CHECK CONSTRAINT [FK_NetworkSolutionsStore_Store];

ALTER TABLE [dbo].[NeweggStore] WITH CHECK CHECK CONSTRAINT [FK_NeweggStore_Store];

ALTER TABLE [dbo].[OrderMotionStore] WITH CHECK CHECK CONSTRAINT [FK_OrderMotionStore_Store];

ALTER TABLE [dbo].[PayPalStore] WITH CHECK CHECK CONSTRAINT [FK_PayPalStore_Store];

ALTER TABLE [dbo].[ProStoresStore] WITH CHECK CHECK CONSTRAINT [FK_ProStoresStore_Store];

ALTER TABLE [dbo].[SearsStore] WITH CHECK CHECK CONSTRAINT [FK_SearsStore_Store];

ALTER TABLE [dbo].[ShopifyStore] WITH CHECK CHECK CONSTRAINT [FK_ShopifyStore_Store];

ALTER TABLE [dbo].[StatusPreset] WITH CHECK CHECK CONSTRAINT [FK_StatusPreset_Store];

ALTER TABLE [dbo].[ShopSiteStore] WITH CHECK CHECK CONSTRAINT [FK_StoreShopSite_Store];

ALTER TABLE [dbo].[ThreeDCartStore] WITH CHECK CHECK CONSTRAINT [FK_ThreeDCartStore_Store];

ALTER TABLE [dbo].[VolusionStore] WITH CHECK CHECK CONSTRAINT [FK_VolusionStore_Store];

ALTER TABLE [dbo].[YahooStore] WITH CHECK CHECK CONSTRAINT [FK_YahooStore_Store];


GO
PRINT N'Update complete.';


GO
